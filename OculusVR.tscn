[gd_scene load_steps=6 format=2]

[ext_resource path="res://addons/godot-oculus/scenes/oculus_left_touch_controller.tscn" type="PackedScene" id=1]
[ext_resource path="res://addons/godot-oculus/scenes/oculus_right_touch_controller.tscn" type="PackedScene" id=2]
[ext_resource path="res://DirectionalMovement.gd" type="Script" id=3]

[sub_resource type="GDScript" id=1]

script/source = "extends ARVRController

signal controller_activated(controller)

onready var ws = ARVRServer.world_scale

func _ready():
	# hide to begin with
	visible = false
	
	# set our initial controller mesh scale
	$controller_mesh.scale = Vector3(ws, ws, ws)

func _process(delta):
	# apply changes to our world scale
	var new_ws = ARVRServer.world_scale
	if (ws != new_ws):
		ws = new_ws
		$controller_mesh.scale = Vector3(ws, ws, ws)
	
	if !get_is_active():
		visible = false
	elif !visible:
		# make it visible
		visible = true
		emit_signal(\"controller_activated\", self)"

[sub_resource type="GDScript" id=2]

script/source = "extends ARVRController

signal controller_activated(controller)

onready var ws = ARVRServer.world_scale

func _ready():
	# hide to begin with
	visible = false
	
	# set our initial controller mesh scale
	$controller_mesh.scale = Vector3(ws, ws, ws)

func _process(delta):
	# apply changes to our world scale
	var new_ws = ARVRServer.world_scale
	if (ws != new_ws):
		ws = new_ws
		$controller_mesh.scale = Vector3(ws, ws, ws)
	
	if !get_is_active():
		visible = false
	elif !visible:
		# make it visible
		visible = true
		emit_signal(\"controller_activated\", self)"

[node name="ARVROrigin" type="ARVROrigin" index="0"]

transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 6.54886, 0 )
world_scale = 1.0

[node name="ARVRCamera" type="ARVRCamera" parent="." index="0"]

keep_aspect = 1
cull_mask = 1048575
environment = null
h_offset = 0.0
v_offset = 0.0
doppler_tracking = 0
projection = 0
current = false
fov = 70.0
size = 1.0
near = 0.05
far = 100.0

[node name="oculus_left_touch_controller" parent="." index="1" instance=ExtResource( 1 )]

script = SubResource( 1 )

[node name="oculus_right_touch_controller" parent="." index="2" instance=ExtResource( 2 )]

script = SubResource( 2 )

[node name="DirectionalMovement" type="Spatial" parent="." index="3"]

script = ExtResource( 3 )
origin = NodePath("..")
camera = NodePath("../ARVRCamera")
controller = NodePath("../oculus_left_touch_controller")
player_height = 1.8
player_radius = 0.4


